{% extends 'Main/base.html' %}
{% block map %} active {% endblock %}
{% block content %}
<link href="https://api.mapbox.com/mapbox-gl-js/v2.6.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.6.0/mapbox-gl.js"></script>
<div class="container-fluid">
    <div class="row p-0">
        <div class="col-3 bg-dark text-light"> {{center}} <br>
            {{lat_long}}
        </div>
        <div class="col-9 p-0">
            <div id='map' style='width: 100%; height: 90vh;'></div>
        </div>
    </div>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoicmFqc29uaTAzIiwiYSI6ImNrNThmY25tYTA3MWwzbG50bzdndXZ5ZngifQ.-fSnHZymHAiDIUBKSuQGAQ';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: {{center}},
    zoom: {{map_zoom}}
});

map.on('load', function() {
    map.addLayer({
        'id': 'lines',
        'type': 'line',
        'source': {
            'type': 'geojson',
            'data': {
                'type': 'FeatureCollection',
                'features': [{
                        'type': 'Feature',
                        'properties': {
                            'color': '#ff0000' // 
                        },
                        'geometry': {
                            'type': 'LineString',
                            'coordinates':  {{lat_long}}
                        }
                    }
                ]
            }
        },
        'paint': {
            'line-width': 3,
            'line-color': ['get', 'color']
        }
    });
});
</script>
{% endblock %}